!function(){"use strict";function t(){}function r(t){return t()}function e(){return Object.create(null)}function n(t){t.forEach(r)}function o(t){return"function"==typeof t}function i(t,r){return t!=t?r==r:t!==r||t&&"object"==typeof t||"function"==typeof t}function a(t,r){t.appendChild(r)}function u(t,r,e){t.insertBefore(r,e||null)}function l(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function d(){return s(" ")}function p(t,r,e,n){return t.addEventListener(r,e,n),()=>t.removeEventListener(r,e,n)}function f(t,r,e){null==e?t.removeAttribute(r):t.setAttribute(r,e)}function g(t,r){r=""+r,t.data!==r&&(t.data=r)}function h(t,r){for(let e=0;e<t.options.length;e+=1){const n=t.options[e];if(n.__value===r)return void(n.selected=!0)}}let m;function v(t){m=t}const $=[],_=Promise.resolve();let y=!1;const b=[],E=[],w=[];function x(t){E.push(t)}function D(){const t=new Set;do{for(;$.length;){const t=$.shift();v(t),T(t.$$)}for(;b.length;)b.shift()();for(;E.length;){const r=E.pop();t.has(r)||(r(),t.add(r))}}while($.length);for(;w.length;)w.pop()();y=!1}function T(t){t.fragment&&(t.update(t.dirty),n(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(x))}const k=new Set;function Y(t,r){t.$$.dirty||($.push(t),y||(y=!0,_.then(D)),t.$$.dirty=e()),t.$$.dirty[r]=!0}function I(i,a,u,l,c,s){const d=m;v(i);const p=a.props||{},f=i.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:null};let g=!1;var h,$;f.ctx=u?u(i,p,(t,r)=>{f.ctx&&c(f.ctx[t],f.ctx[t]=r)&&(f.bound[t]&&f.bound[t](r),g&&Y(i,t))}):p,f.update(),g=!0,n(f.before_render),f.fragment=l(f.ctx),a.target&&(a.hydrate?f.fragment.l(function(t){return Array.from(t.childNodes)}(a.target)):f.fragment.c(),a.intro&&((h=i.$$.fragment)&&h.i&&(k.delete(h),h.i($))),function(t,e,i){const{fragment:a,on_mount:u,on_destroy:l,after_render:c}=t.$$;a.m(e,i),x(()=>{const e=u.map(r).filter(o);l?l.push(...e):n(e),t.$$.on_mount=[]}),c.forEach(x)}(i,a.target,a.anchor),D()),v(d)}class M{$destroy(){var r,e;e=1,(r=this).$$.fragment&&(n(r.$$.on_destroy),r.$$.fragment.d(e),r.$$.on_destroy=r.$$.fragment=null,r.$$.ctx={}),this.$destroy=t}$on(t,r){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(r),()=>{const t=e.indexOf(r);-1!==t&&e.splice(t,1)}}$set(){}}const C=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/;function B(t){var r,e;return{c(){r=c("p"),e=s(t.departingError),f(r,"class","form-input-hint")},m(t,n){u(t,r,n),a(r,e)},p(t,r){t.departingError&&g(e,r.departingError)},d(t){t&&l(r)}}}function F(t){var r,e;return{c(){r=c("p"),e=s(t.returningError),f(r,"class","form-input-hint")},m(t,n){u(t,r,n),a(r,e)},p(t,r){t.returningError&&g(e,r.returningError)},d(t){t&&l(r)}}}function j(r){var e,o,i,g,m,v,$,_,y,b,E,w,D,T,k,Y,I,M,C,j,S,U,q,L,O,P=r.departingError&&B(r),R=r.returningError&&F(r);return{c(){e=c("div"),(o=c("label")).textContent="Trip type",i=c("select"),g=c("option"),m=s("one-way flight"),v=c("option"),$=s("return flight"),_=d(),y=c("div"),(b=c("label")).textContent="Departing",E=c("input"),w=d(),P&&P.c(),T=d(),k=c("div"),(Y=c("label")).textContent="Returning",I=c("input"),C=d(),R&&R.c(),S=d(),U=c("div"),q=c("button"),L=s("book"),f(o,"class","form-label"),f(o,"for","trip-type"),g.__value=A,g.value=g.__value,v.__value=N,v.value=v.__value,void 0===r.tripType&&x(()=>r.select_change_handler.call(i)),f(i,"id","trip-type"),f(i,"class","form-select"),f(e,"class","form-group"),f(b,"class","form-label"),f(b,"for","departing-date"),f(E,"id","departing-date"),f(E,"class","form-input"),f(E,"type","text"),f(y,"class",D="form-group "+(r.departingError?"has-error":"")),f(Y,"class","form-label"),f(Y,"for","returning-date"),f(I,"id","returning-date"),f(I,"class","form-input"),f(I,"type","text"),I.disabled=M=r.tripType==A,f(k,"class",j="form-group "+(r.returningError?"has-error":"")),f(q,"class","btn btn-primary"),q.disabled=r.isBookDisabled,f(U,"class","form-group"),O=[p(i,"change",r.select_change_handler),p(E,"input",r.input0_input_handler),p(I,"input",r.input1_input_handler),p(q,"click",r.bookFlight)]},m(t,n){u(t,e,n),a(e,o),a(e,i),a(i,g),a(g,m),a(i,v),a(v,$),h(i,r.tripType),u(t,_,n),u(t,y,n),a(y,b),a(y,E),E.value=r.departing,a(y,w),P&&P.m(y,null),u(t,T,n),u(t,k,n),a(k,Y),a(k,I),I.value=r.returning,a(k,C),R&&R.m(k,null),u(t,S,n),u(t,U,n),a(U,q),a(q,L)},p(t,r){g.value=g.__value,v.value=v.__value,t.tripType&&h(i,r.tripType),t.departing&&E.value!==r.departing&&(E.value=r.departing),r.departingError?P?P.p(t,r):((P=B(r)).c(),P.m(y,null)):P&&(P.d(1),P=null),t.departingError&&D!==(D="form-group "+(r.departingError?"has-error":""))&&f(y,"class",D),t.returning&&I.value!==r.returning&&(I.value=r.returning),t.tripType&&M!==(M=r.tripType==A)&&(I.disabled=M),r.returningError?R?R.p(t,r):((R=F(r)).c(),R.m(k,null)):R&&(R.d(1),R=null),t.returningError&&j!==(j="form-group "+(r.returningError?"has-error":""))&&f(k,"class",j),t.isBookDisabled&&(q.disabled=r.isBookDisabled)},i:t,o:t,d(t){t&&(l(e),l(_),l(y)),P&&P.d(),t&&(l(T),l(k)),R&&R.d(),t&&(l(S),l(U)),n(O)}}}const A="one-way",N="return";function S(t){try{return function(t){if(null==t)throw new Error("Invalid date. Date must be in the format of YYYY-MM-DD");const r=t.match(C);if(null==r)throw new Error("Invalid date. Date must be in the format of YYYY-MM-DD");const e=parseInt(r[1]),n=parseInt(r[2]),o=parseInt(r[3]);if(o<1||o>31)throw new Error("Invalid date. Date must be between 1-31.");if(n<1||n>12)throw new Error("Invalid month. Month must be between 1-12.");const i=new Date(t);if(o!==i.getUTCDate())throw new Error("Invalid date. Date isn't correct.");if(n!==i.getUTCMonth()+1)throw new Error("Invalid date. Month isn't correct.");if(e!==i.getUTCFullYear())throw new Error("Invalid date. Year isn't correct.")}(t),null}catch(t){return t.message}}function U(t,r,e){let n,o,i,a=function(){const t=new Date;let r=t.getMonth()+1,e=t.getDate();return[t.getFullYear(),r<10?"0"+r:r,e<10?"0"+e:e].join("-")}(),u=a,l=A;return t.$$.update=(t={departing:1,returning:1,departingError:1,returningError:1,tripType:1})=>{t.departing&&e("departingError",n=S(a)),t.returning&&e("returningError",o=S(u)),(t.departingError||t.returningError||t.tripType||t.returning||t.departing)&&e("isBookDisabled",i=n||o||l==N&&u<a)},{departing:a,returning:u,tripType:l,bookFlight:function(){const t=l==N?"return":"one-way";let r=`You have booked a ${t} flight, leaving ${a}`;"return"===t&&(r+=` and returning ${u}`),alert(r)},departingError:n,returningError:o,isBookDisabled:i,select_change_handler:function(){l=function(t){const r=t.querySelector(":checked")||t.options[0];return r&&r.__value}(this),e("tripType",l),e("returnFlight",N),e("oneWayFlight",A)},input0_input_handler:function(){a=this.value,e("departing",a)},input1_input_handler:function(){u=this.value,e("returning",u)}}}new class extends M{constructor(t){super(),I(this,t,U,j,i,[])}}({target:document.getElementById("app")})}();