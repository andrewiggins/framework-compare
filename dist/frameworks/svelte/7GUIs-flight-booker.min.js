!function(){"use strict";function r(){}function t(r){return r()}function n(){return Object.create(null)}function e(r){r.forEach(t)}function o(r){return"function"==typeof r}function i(r,t){return r!=r?t==t:r!==t||r&&"object"==typeof r||"function"==typeof r}function a(r,t){r.appendChild(t)}function u(r,t,n){r.insertBefore(t,n||null)}function l(r){r.parentNode.removeChild(r)}function c(r){return document.createElement(r)}function s(r){return document.createTextNode(r)}function d(){return s(" ")}function p(r,t,n,e){return r.addEventListener(t,n,e),()=>r.removeEventListener(t,n,e)}function f(r,t,n){null==n?r.removeAttribute(t):r.setAttribute(t,n)}function g(r,t){t=""+t,r.data!==t&&(r.data=t)}function h(r,t){for(let n=0;n<r.options.length;n+=1){const e=r.options[n];if(e.__value===t)return void(e.selected=!0)}}let m;function v(r){m=r}const $=[],_=Promise.resolve();let y=!1;const b=[],E=[],w=[];function x(r){E.push(r)}function D(){const r=new Set;do{for(;$.length;){const r=$.shift();v(r),T(r.$$)}for(;b.length;)b.shift()();for(;E.length;){const t=E.pop();r.has(t)||(t(),r.add(t))}}while($.length);for(;w.length;)w.pop()();y=!1}function T(r){r.fragment&&(r.update(r.dirty),e(r.before_render),r.fragment.p(r.dirty,r.ctx),r.dirty=null,r.after_render.forEach(x))}const k=new Set;function Y(r,t){r.$$.dirty||($.push(r),y||(y=!0,_.then(D)),r.$$.dirty=n()),r.$$.dirty[t]=!0}function I(i,a,u,l,c,s){const d=m;v(i);const p=a.props||{},f=i.$$={fragment:null,ctx:null,props:s,update:r,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:null};let g=!1;var h,$;f.ctx=u?u(i,p,(r,t)=>{f.ctx&&c(f.ctx[r],f.ctx[r]=t)&&(f.bound[r]&&f.bound[r](t),g&&Y(i,r))}):p,f.update(),g=!0,e(f.before_render),f.fragment=l(f.ctx),a.target&&(a.hydrate?f.fragment.l(function(r){return Array.from(r.childNodes)}(a.target)):f.fragment.c(),a.intro&&((h=i.$$.fragment)&&h.i&&(k.delete(h),h.i($))),function(r,n,i){const{fragment:a,on_mount:u,on_destroy:l,after_render:c}=r.$$;a.m(n,i),x(()=>{const n=u.map(t).filter(o);l?l.push(...n):e(n),r.$$.on_mount=[]}),c.forEach(x)}(i,a.target,a.anchor),D()),v(d)}class M{$destroy(){var t,n;n=1,(t=this).$$.fragment&&(e(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=r}$on(r,t){const n=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return n.push(t),()=>{const r=n.indexOf(t);-1!==r&&n.splice(r,1)}}$set(){}}const C=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/;function B(r){var t,n;return{c(){t=c("p"),n=s(r.departingError),f(t,"class","form-input-hint")},m(r,e){u(r,t,e),a(t,n)},p(r,t){r.departingError&&g(n,t.departingError)},d(r){r&&l(t)}}}function F(r){var t,n;return{c(){t=c("p"),n=s(r.returningError),f(t,"class","form-input-hint")},m(r,e){u(r,t,e),a(t,n)},p(r,t){r.returningError&&g(n,t.returningError)},d(r){r&&l(t)}}}function j(t){var n,o,i,g,m,v,$,_,y,b,E,w,D,T,k,Y,I,M,C,j,S,U,q,L,O,R=t.departingError&&B(t),P=t.returningError&&F(t);return{c(){n=c("div"),(o=c("label")).textContent="Trip type",i=c("select"),g=c("option"),m=s("one-way flight"),v=c("option"),$=s("return flight"),_=d(),y=c("div"),(b=c("label")).textContent="Departing",E=c("input"),w=d(),R&&R.c(),T=d(),k=c("div"),(Y=c("label")).textContent="Returning",I=c("input"),C=d(),P&&P.c(),S=d(),U=c("div"),q=c("button"),L=s("book"),f(o,"class","form-label"),f(o,"for","trip-type"),g.__value=A,g.value=g.__value,v.__value=N,v.value=v.__value,void 0===t.tripType&&x(()=>t.select_change_handler.call(i)),f(i,"id","trip-type"),f(i,"class","form-select"),f(n,"class","form-group"),f(b,"class","form-label"),f(b,"for","departing-date"),f(E,"id","departing-date"),f(E,"class","form-input"),f(E,"type","text"),f(y,"class",D="form-group "+(t.departingError?"has-error":"")),f(Y,"class","form-label"),f(Y,"for","returning-date"),f(I,"id","returning-date"),f(I,"class","form-input"),f(I,"type","text"),I.disabled=M=t.tripType==A,f(k,"class",j="form-group "+(t.returningError?"has-error":"")),f(q,"class","btn btn-primary"),q.disabled=t.isBookDisabled,f(U,"class","form-group"),O=[p(i,"change",t.select_change_handler),p(E,"input",t.input0_input_handler),p(I,"input",t.input1_input_handler),p(q,"click",t.bookFlight)]},m(r,e){u(r,n,e),a(n,o),a(n,i),a(i,g),a(g,m),a(i,v),a(v,$),h(i,t.tripType),u(r,_,e),u(r,y,e),a(y,b),a(y,E),E.value=t.departing,a(y,w),R&&R.m(y,null),u(r,T,e),u(r,k,e),a(k,Y),a(k,I),I.value=t.returning,a(k,C),P&&P.m(k,null),u(r,S,e),u(r,U,e),a(U,q),a(q,L)},p(r,t){g.value=g.__value,v.value=v.__value,r.tripType&&h(i,t.tripType),r.departing&&E.value!==t.departing&&(E.value=t.departing),t.departingError?R?R.p(r,t):((R=B(t)).c(),R.m(y,null)):R&&(R.d(1),R=null),r.departingError&&D!==(D="form-group "+(t.departingError?"has-error":""))&&f(y,"class",D),r.returning&&I.value!==t.returning&&(I.value=t.returning),r.tripType&&M!==(M=t.tripType==A)&&(I.disabled=M),t.returningError?P?P.p(r,t):((P=F(t)).c(),P.m(k,null)):P&&(P.d(1),P=null),r.returningError&&j!==(j="form-group "+(t.returningError?"has-error":""))&&f(k,"class",j),r.isBookDisabled&&(q.disabled=t.isBookDisabled)},i:r,o:r,d(r){r&&(l(n),l(_),l(y)),R&&R.d(),r&&(l(T),l(k)),P&&P.d(),r&&(l(S),l(U)),e(O)}}}const A="one-way",N="return";function S(r){try{return function(r){if(null==r)throw new Error("Invalid date. Date must be in the format of YYYY-MM-DD");const t=r.match(C);if(null==t)throw new Error("Invalid date. Date must be in the format of YYYY-MM-DD");const n=parseInt(t[1]),e=parseInt(t[2]),o=parseInt(t[3]);if(o<1||o>31)throw new Error("Invalid date. Date must be between 1-31.");if(e<1||e>12)throw new Error("Invalid month. Month must be between 1-12.");const i=new Date(r);if(o!==i.getUTCDate())throw new Error("Invalid date. Date isn't correct.");if(e!==i.getUTCMonth()+1)throw new Error("Invalid date. Month isn't correct.");if(n!==i.getUTCFullYear())throw new Error("Invalid date. Year isn't correct.")}(r),null}catch(r){return r.message}}function U(r,t,n){let e,o,i,a=function(){const r=new Date;let t=r.getMonth()+1,n=r.getDate();return[r.getFullYear(),t<10?"0"+t:t,n<10?"0"+n:n].join("-")}(),u=a,l=A;return r.$$.update=(r={departing:1,returning:1,departingError:1,returningError:1,tripType:1})=>{r.departing&&n("departingError",e=S(a)),r.returning&&n("returningError",o=S(u)),(r.departingError||r.returningError||r.tripType||r.returning||r.departing)&&null==e&&null==o&&l==N&&u<a&&n("returningError",o="Returning date must be on or after departing date."),(r.departingError||r.returningError||r.tripType||r.returning||r.departing)&&n("isBookDisabled",i=e||o||l==N&&u<a)},{departing:a,returning:u,tripType:l,bookFlight:function(){const r=l==N?"return":"one-way";let t=`You have booked a ${r} flight, leaving ${a}`;"return"===r&&(t+=` and returning ${u}`),alert(t)},departingError:e,returningError:o,isBookDisabled:i,select_change_handler:function(){l=function(r){const t=r.querySelector(":checked")||r.options[0];return t&&t.__value}(this),n("tripType",l),n("returnFlight",N),n("oneWayFlight",A)},input0_input_handler:function(){a=this.value,n("departing",a)},input1_input_handler:function(){u=this.value,n("returning",u)}}}new class extends M{constructor(r){super(),I(this,r,U,j,i,[])}}({target:document.getElementById("app")})}();